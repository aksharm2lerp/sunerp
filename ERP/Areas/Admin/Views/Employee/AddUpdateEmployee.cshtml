@using Business.Entities.Employee
@using Business.Entities.Employee.EmployeeMedicalHistory;
@using Business.Entities.Employee.EmployeeMedicalInsurance;
@using System.Data;
@model AddUpdateEmployee
@{
    Layout = "~/Views/Shared/_LayoutMaster.cshtml";
    ViewBag.Title = "Employee Details..";
    List<EmployeeAddressTxn> employeeAddress = EmployeeExtension.ListOfEmployeeAddress(Model.EmployeeID);
    EmployeeFamilyDetail employeeFamilyDetail = EmployeeExtension.GetEmployeeFamilyDetail(Model.EmployeeID);
    List<EmployeeBankDetails> employeeBankDetails = EmployeeExtension.GetEmployeesAllBankAccount(Model.EmployeeID);
    List<EmployeeDocument> employeeDocuments = EmployeeExtension.GetEmployeesAllDocuments(Model.EmployeeID);
    List<EmployeeEducation> employeeEducation = EmployeeExtension.GetEmployeesAllEducation(Model.EmployeeID);
    List<EmployeeExperience> employeeExperience = EmployeeExtension.GetEmployeesAllExperience(Model.EmployeeID);
    EmployeeHRAdministration employeeHRAdministration = EmployeeExtension.GetEmployeeHRAdministration(Model.EmployeeID);
    DataTable employeeSalaryBreakup = EmployeeExtension.GetEmployeeSalaryBreakup(Model.EmployeeID);
    List<EmployeeIdentity> employeeIdentity = EmployeeExtension.GetEmployeeAllIdentity(Model.EmployeeID);
    List<EmployeeMedicalHistory> employeeMedicalHistory = EmployeeExtension.GetEmployeeAllMedicalHistory(Model.EmployeeID);
    List<EmployeeMedicalInsurance> employeeMedicalInsurance = EmployeeExtension.GetEmployeeAllMedicalInsurance(Model.EmployeeID);
    EmployeePromotionIncrement employeePromotionIncrement = EmployeeExtension.GetEmployeePromotionIncrement(Model.EmployeeID);
 
}
<div class="row card">
    <div class="card-content">
        <div class="card-body">
            <ul class="nav nav-tabs" id="myTab" role="tablist">

                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="details-tab" data-bs-toggle="tab" href="#details" role="tab" aria-controls="details" aria-selected="false">Employee Details</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="address-tab" data-bs-toggle="tab" href="#address" role="tab" aria-controls="address" aria-selected="true" disabled>Address</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="family-tab" data-bs-toggle="tab" href="#familyBackground" role="tab" aria-controls="familyBackground" aria-selected="true" disabled>Family background</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="banking-tab" data-bs-toggle="tab" href="#bankingDetail" role="tab" aria-controls="bankingDetail" aria-selected="true" disabled>Banking detail</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="document-tab" data-bs-toggle="tab" href="#employeeDocuments" role="tab" aria-controls="employeeDocuments" aria-selected="true" disabled>Employee documents</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="administration-tab" data-bs-toggle="tab" href="#hrAdministration" role="tab" aria-controls="hrAdministration" aria-selected="true" disabled>HR Administration</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="education-tab" data-bs-toggle="tab" href="#employeeEducation" role="tab" aria-controls="employeeEducation" aria-selected="true" disabled>Education</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="experience-tab" data-bs-toggle="tab" href="#employeeExperience" role="tab" aria-controls="employeeExperience" aria-selected="true" disabled>Experience</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="employeeSalary-tab" data-bs-toggle="tab" href="#employeeSalary" role="tab" aria-controls="employeeSalary" aria-selected="true" disabled>Salary BreakUp</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="employeeIdentity-tab" data-bs-toggle="tab" href="#employeeIdentity" role="tab" aria-controls="employeeIdentity" aria-selected="true" disabled>Identity</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="employeeMedicalHistory-tab" data-bs-toggle="tab" href="#employeeMedicalHistory" role="tab" aria-controls="employeeMedicalHistory" aria-selected="true" disabled>Medical History</a>
                </li>

                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="employeeMedicalInsurance-tab" data-bs-toggle="tab" href="#employeeMedicalInsurance" role="tab" aria-controls="employeeMedicalInsurance" aria-selected="true" disabled>Medical Insurance</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="employeePromotionIncrement-tab" data-bs-toggle="tab" href="#employeePromotionIncrement" role="tab" aria-controls="employeePromotionIncrement" aria-selected="true" disabled>Promotion/Increment</a>
                </li>
            </ul>
        </div>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade active show" id="details" role="tabpanel" aria-labelledby="details-tab">
                <form id="formEmployee" asp-action="AddUpdateEmployee" asp-controller="Employee" asp-area="Admin" class="row g-3" enctype="multipart/form-data">
                    <input type="hidden" asp-for="EmployeeID" />
                    <div class="accordion" id="accordionEmployeeDetails">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingEmployeePersonalDetails">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEmployeePersonalDetails" aria-expanded="true" aria-controls="collapseEmployeePersonalDetails" style="padding: 0.5rem 1rem; color:#696969; background-color:#C5C5C5">
                                    Personal Details
                                </button>
                            </h2>
                            <div id="collapseEmployeePersonalDetails" class="accordion-collapse collapse show" aria-labelledby="headingEmployeePersonalDetails" data-bs-parent="#accordionEmployeeDetails">
                                <div class="accordion-body">
                                    <div class="row">

                                        <div class=" col-sm-12 col-md-6 col-lg-6">

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Prefix:</label>
                                                <div class="col-sm-9">
                                                    <select name="prefixName" id="PrefixName" class="form-control">
                                                        <option value="Mr.">Mr.</option>
                                                        <option value="Mrs.">Mrs.</option>
                                                        <option value="Ms.">Ms.</option>
                                                        <option value="Miss.">Miss.</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">First Name:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="text" required="" class="form-control" id="FirstName" name="FirstName" asp-for="FirstName" placeholder="">
                                                    <span asp-validation-for="FirstName" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Middle Name:</label>
                                                <div class="col-sm-9">

                                                    <input type="text" class="form-control" asp-for="MiddleName" id="MiddleName" name="MiddleName" placeholder="">

                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Last Name:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="text" required="" class="form-control" id="LastName" name="LastName" asp-for="LastName" placeholder="">
                                                    <span asp-validation-for="LastName" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Personel mobile no:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="tel" required="" class="form-control" id="PersonalMobileNo" name="PersonalMobileNo" asp-for="PersonalMobileNo" placeholder="">
                                                    <span asp-validation-for="PersonalMobileNo" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Alternate mobile no:</label>
                                                <div class="col-sm-9">
                                                    @*asp-for="AlternativeMobileNo"*@
                                                    <input type="text" class="form-control" id="AlternativeMobileNo" name="AlternativeMobileNo" placeholder="">
                                                    @*<span asp-validation-for="AlternativeMobileNo" class="text-danger" />*@
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Gender:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <select asp-for="GenderID" asp-items="ViewBag.GenderIdText" class="form-control">
                                                        <option value="">Select gender</option>
                                                    </select>
                                                    <span asp-validation-for="GenderID" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Personal email:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="email" class="form-control" id="PersonalEmail" name="PersonalEmail" asp-for="PersonalEmail" placeholder="">
                                                    <span asp-validation-for="PersonalEmail" class="text-danger" />
                                                </div>
                                            </div>

                                        </div>


                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <label asp-for="ProfilePhoto" class="col-form-label ">Profile Image:</label>
                                                </div>
                                                <div class="col-sm-3">
                                                    <input asp-for="ProfilePhoto" type="file" class="form-control" accept="image/*" name="profilePhoto" id="profilePhoto" onchange="loadFile(event)" style="display: none;" />
                                                    <label for="profilePhoto" style="cursor: pointer; color:darkblue">
                                                        Upload the image for logo<br />
                                                        @if (Model != null && !string.IsNullOrEmpty(Model.ImagePath))
                                                        {
                                                            <img id="output" width="200" height="200" src="@ViewBag.Image" />
                                                        }
                                                        else
                                                        {
                                                            <img id="output" width="200" height="200" src="~/assets/images/DefaultProfilePicture/defaultprofilepicture.png" />
                                                        }
                                                    </label>
                                                    <script>
                                                        var loadFile = function (event) {
                                                            var image = document.getElementById('output');
                                                            image.src = URL.createObjectURL(event.target.files[0]);
                                                        };
                                                    </script>
                                                </div>
                                            </div>
                                            <br />
                                            @if (Model.EmployeeID > 0)
                                            {
                                                <div class="row mb-3">
                                                    <label for="" class="col-sm-3 col-form-label ">DOB:<span class="required">*</span></label>
                                                    <div class="col-sm-9">
                                                        <input type="date" class="form-control" id="BirthDate" name="BirthDate" asp-for="BirthDate" required>
                                                        <span asp-validation-for="BirthDate" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row mb-3">
                                                    <label for="" class="col-sm-3 col-form-label ">DOB:<span class="required">*</span></label>
                                                    <div class="col-sm-9">
                                                        <input type="date" value="" class="form-control" id="BirthDate" name="BirthDate" asp-for="BirthDate" required>
                                                        <span asp-validation-for="BirthDate" class="text-danger"></span>
                                                    </div>
                                                </div>
                                            }
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Religion:</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" id="Religion" name="Religion" asp-for="Religion" placeholder="">
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Employee Blood Group:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <select asp-for="EmployeeBloodGroupID" asp-items="@EmployeeExtension.GetAllBloodGroupMaster()" class="form-control" id="EmployeeBloodGroupID">
                                                        <option value="">Select Blood group</option>
                                                    </select>
                                                    <span asp-validation-for="EmployeeBloodGroupID" class="text-danger"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Below code added by Rahul Mistry on 25-July-2023 -->

                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingEmployeeIdentityDetails">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEmployeeIdentityDetails" aria-expanded="true" aria-controls="collapseEmployeeIdentityDetails" style="padding: 0.5rem 1rem; color:#696969; background-color:#C5C5C5">
                                    Identity Details
                                </button>
                            </h2>
                            <div id="collapseEmployeeIdentityDetails" class="accordion-collapse collapse show" aria-labelledby="headingEmployeeIdentityDetails" data-bs-parent="#accordionEmployeeDetails">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Adhar Card No:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="text" required="" class="form-control" id="AadharCardNo" name="AadharCardNo" asp-for="AadharCardNo" placeholder="0000 0000 0000">
                                                    <span asp-validation-for="AadharCardNo" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">PAN Card No:</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" id="PANCardNo" name="PANCardNo" asp-for="PANCardNo" placeholder="First 5 Alhphabet and 4 Numerics and 1 Alphabet">
                                                    <span asp-validation-for="PANCardNo" class="text-danger" />
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Voter ID No:</label>
                                                <div class="col-sm-9">
                                                    <input type="text" class="form-control" id="VoterIDNo" name="VoterIDNo" asp-for="VoterIDNo" placeholder="">
                                                    @*<span asp-validation-for="VoterIDNo" class="text-danger" />*@
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Above code added by Rahul Mistry on 25-July-2023 -->
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingEmployeeOfficialDetails">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEmployeeOfficialDetails" aria-expanded="true" aria-controls="collapseEmployeeOfficialDetails" style="padding: 0.5rem 1rem; color:#696969; background-color:#C5C5C5">
                                    Official Details
                                </button>
                            </h2>
                            <div id="collapseEmployeeOfficialDetails" class="accordion-collapse collapse show" aria-labelledby="headingEmployeeOfficialDetails" data-bs-parent="#accordionEmployeeDetails">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            @if (Model != null && Model.EmployeeID > 0)
                                            {
                                                <div class="row mb-3">
                                                    <label for="" class="col-sm-3 col-form-label ">Employee code:</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control" id="EmployeeCode" name="EmployeeCode" asp-for="EmployeeCode" placeholder="" disabled>
                                                    </div>
                                                </div>
                                            }

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Job title:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <input type="text" required="" class="form-control" id="JobTitle" name="JobTitle" asp-for="JobTitle" placeholder="">
                                                    <span asp-validation-for="JobTitle" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Department:<span class="required">*</span></label>
                                                <div class="col-sm-9">
                                                    <select asp-for="DepartmentID" onchange="fnChangeReportingToList()" asp-items="ViewBag.DepartmentIdName" id="DepartmentID" class="form-control">
                                                        <option value="">Select Department</option>
                                                    </select>
                                                    <span asp-validation-for="DepartmentID" class="text-danger" />
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Designation:<span class="required">*</span></label>
                                                <div class="col-sm-6">
                                                    <!--add below asp-items="ViewBag" for designation-->
                                                    <select asp-for="DesignationID" asp-items="ViewBag.DesignationIdText" class="form-control">
                                                        <option value="">Select Designation</option>
                                                    </select>
                                                    <span asp-validation-for="DesignationID" class="text-danger" />
                                                </div>
                                                <div class="col-sm-3">
                                                    <label for="" class="col-form-label ">Is HOD:</label>
                                                    <input type="checkbox" class="form-check-input" asp-for="IsHOD">
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Reporting to name:<span class="required">*</span></label>
                                                <div class="col-sm-6">
                                                    <!--add below asp-items="ViewBag" for reporting list-->
                                                    <select asp-for="ReportingTo" asp-items="ViewBag.EmployeeIdName" class="form-control" id="ReportingTo">
                                                        <option value="">Select Reporter Name</option>
                                                    </select>
                                                    <span asp-validation-for="ReportingTo" class="text-danger" />
                                                </div>
                                                <label for="" class="col-sm-2 col-form-label ">Reporting to other:</label>
                                                <div class="col-sm-1 h4 my-2">
                                                    <a class="MCLFAB" title="Report to other person" onclick="fnShowOtherReportings()"><iconify-icon icon="material-symbols:add-circle-outline-rounded" class="parent-icon"></iconify-icon></a>
                                                </div>
                                            </div>
                                            <div class="row mb-3" id="divForOtherReporting" hidden>
                                                @*<label for="" class="col-sm-3 col-form-label ">Reporting to name:<span class="required">*</span></label>*@
                                                <input type="hidden" asp-for="ReportingToArray" id="ReportingToArray" name="ReportingToArray">
                                                <label for="" class="col-sm-3 col-form-label ">Other Reporting:</label>
                                                <div class="col-sm-9">
                                                    <!--add below asp-items="ViewBag" for reporting list-->
                                                    <select asp-for="ReportingToOther" asp-items="ViewBag.EmployeeIdName" class="form-select" id="ReportingToOther" multiple>
                                                    </select>
                                                    @*<span asp-validation-for="ReportingTo" class="text-danger" />*@
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-sm-12 col-md-6 col-lg-6">

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Office mobile no:</label>
                                                <div class="col-sm-9">
                                                    <input type="tel" class="form-control" id="OfficeMobileNo" name="OfficeMobileNo" asp-for="OfficeMobileNo" placeholder="">
                                                    @* <span asp-validation-for="OfficeMobileNo" class="text-danger" /> *@
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Email group:</label>
                                                <div class="col-sm-9">
                                                    @*asp-for="EmailGroupID" id="EmailGroupID" name="EmailGroupID"*@
                                                    <select asp-for="EmailGroupID" name="EmailGroupID" asp-items="ViewBag.EmailGroupName" class="form-control">
                                                        <option value="">Select Email Group</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="row mb-3">
                                                <label for="" class="col-sm-3 col-form-label ">Office email:</label>
                                                <div class="col-sm-9">
                                                    <input type="email" class="form-control" id="OfficeEmail" name="OfficeEmail" asp-for="OfficeEmail" placeholder="">
                                                    <span asp-validation-for="OfficeEmail" class="text-danger" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="" class="col-sm-1 col-form-label">Note:</label>
                                        <div class="col-sm-11 col-md-11 col-lg-11">
                                            <textarea class="form-control" rows="4" cols="50" id="note" name="Note" asp-for="Note" placeholder=""></textarea>
                                            @*<span asp-validation-for="Note" class="text-danger"/>*@
                                        </div>
                                    </div>

                                    <div class="row mb-3">
                                        <label for="" class="col-sm-2 col-form-label ">Reference By:</label>
                                        <div class="col-sm-4">
                                            <input type="ReferenceBy" class="form-control" id="ReferenceBy" name="ReferenceBy" asp-for="ReferenceBy" placeholder="Referral Name">
                                        </div>
                                        <div class="col-sm-3">
                                            <input type="text" class="form-control" id="ReferenceContact" name="ReferenceContact" asp-for="ReferenceContact" placeholder="Referral Phone">
                                        </div>
                                        <div class="col-sm-3">
                                            <input type="email" class="form-control" id="ReferenceEmail" name="ReferenceEmail" asp-for="ReferenceEmail" placeholder="Referral EmailID">
                                        </div>
                                    </div>

                                    @*<div class="row mb-3">
                                    <label for="" class="col-sm-2 col-form-label ">Is Resigned:</label>
                                    <div class="col-sm-10">
                                    @Html.CheckBoxFor(s => s.IsResigned)
                                    </div>
                                    </div>*@
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button id="btnSave" type="submit" onclick="fnAddReportingToArray()" class="btn btn-primary btn-info px-5 ladda-button">Save</button>
                        <a asp-area="Admin" asp-controller="Employee" asp-action="Index" class="btn btn-primary btn-info px-5 ladda-button">Back</a>
                        @*@Html.ActionLink("Back","Index","Employee");*@
                    </div>
                    <div class="row">
                        &nbsp;
                    </div>
                </form>
            </div>
            <!--<div class="tab-pane fade mt-3 " id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <div id="ContactTable">
            @*@await Html.PartialAsync("_listOfContact", pdsContact)*@
            @*@await Html.PartialAsync("_listOfContact") original*@
                </div>
            </div>-->

            <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab" disabled>
                <div id="AddressTable">
                    @await Html.PartialAsync("_employeeAddressList", employeeAddress)
                </div>
            </div>

            <div class="tab-pane fade" id="familyBackground" role="tabpanel" aria-labelledby="family-tab" disabled>
                <div id="familyBackgroundTable">
                    @await Html.PartialAsync("_employeeFamilyBackground", employeeFamilyDetail)
                </div>
            </div>

            <div class="tab-pane fade" id="bankingDetail" role="tabpanel" aria-labelledby="banking-tab" disabled>
                <div id="bankingDetailTable">
                    @await Html.PartialAsync("_employeeBankAccountList", employeeBankDetails)
                </div>
            </div>

            <div class="tab-pane fade" id="employeeDocuments" role="tabpanel" aria-labelledby="document-tab" disabled>
                <div id="documentTable">
                    @await Html.PartialAsync("_employeeDocumentList", employeeDocuments)
                </div>
            </div>

            <div class="tab-pane fade" id="hrAdministration" role="tabpanel" aria-labelledby="administration-tab" disabled>
                <div id="administrationTable">
                    @await Html.PartialAsync("_employeeHrAdministration", employeeHRAdministration)
                    @*@await Html.PartialAsync("_listOfContact") original*@

                </div>
            </div>

            <div class="tab-pane fade" id="employeeEducation" role="tabpanel" aria-labelledby="education-tab" disabled>
                <div id="educationTable">
                    @await Html.PartialAsync("_employeeemployeeEducationList", employeeEducation)
                    @*@await Html.PartialAsync("_listOfContact") original*@

                </div>
            </div>

            <div class="tab-pane fade" id="employeeExperience" role="tabpanel" aria-labelledby="experience-tab" disabled>
                <div id="educationTable">
                    @await Html.PartialAsync("_employeeemployeeExperienceList", employeeExperience)
                    @*@await Html.PartialAsync("_listOfContact") original*@

                </div>
            </div>

            <div class="tab-pane fade" id="employeeSalary" role="tabpanel" aria-labelledby="employeeSalary-tab" disabled>
                <div id="salaryTable">
                    @await Html.PartialAsync("_employeeSalaryBreakup",employeeSalaryBreakup)
                </div>
            </div>

            <div class="tab-pane fade" id="employeeIdentity" role="tabpanel" aria-labelledby="employeeIdentity-tab" disabled>
                <div id="identityTable">
                    @await Html.PartialAsync("_employeeIdentityList",employeeIdentity)
                </div>
            </div>

            <div class="tab-pane fade" id="employeeMedicalHistory" role="tabpanel" aria-labelledby="employeeMedicalHistory-tab" disabled>
                <div id="medicalHistoryTable">
                    @await Html.PartialAsync("MedicalHistory/_employeeMedicalHistoryList",employeeMedicalHistory)
                </div>
            </div>

            <div class="tab-pane fade" id="employeeMedicalInsurance" role="tabpanel" aria-labelledby="employeeMedicalInsurance-tab" disabled>
                <div id="medicalInsuranceTable">
                    @await Html.PartialAsync("MedicalInsurance/_employeeMedicalInsuranceList",employeeMedicalInsurance)
                </div>
            </div>
            <div class="tab-pane fade" id="employeePromotionIncrement" role="tabpanel" aria-labelledby="employeePromotionIncrement-tab" disabled>
                <div id="promotionIncrementTable">
                    @await Html.PartialAsync("_employeePromotionIncrement", employeePromotionIncrement)
                </div>
            </div>
        </div>
    </div>
</div>


@if (Model != null && Model.EmployeeID > 0)
{
    <script type="text/javascript">
        document.getElementById("employeeIdentity-tab").removeAttribute("disabled");
        document.getElementById("employeeMedicalHistory-tab").removeAttribute("disabled");
        document.getElementById("employeeMedicalInsurance-tab").removeAttribute("disabled");
        document.getElementById("employeePromotionIncrement-tab").removeAttribute("disabled");
        document.getElementById("address-tab").removeAttribute("disabled");
        document.getElementById("family-tab").removeAttribute("disabled");
        document.getElementById("banking-tab").removeAttribute("disabled");
        document.getElementById("document-tab").removeAttribute("disabled");
        document.getElementById("administration-tab").removeAttribute("disabled");
        document.getElementById("education-tab").removeAttribute("disabled");
        document.getElementById("experience-tab").removeAttribute("disabled");
        document.getElementById("employeeSalary-tab").removeAttribute("disabled");
    </script>
}

<script type="text/javascript">
    var reportingDrp = document.getElementById("ReportingTo");
    var reportingToDropdown = document.getElementById("ReportingToOther");
    //var originalReportingToDropdown = reportingToDropdown.innerHTML;
    var employeeids = document.getElementById("ReportingToArray").value;
    $(document).ready(function () {
        if (employeeids != '') {
            document.getElementById('divForOtherReporting').removeAttribute('hidden');
        }

        $.each(employeeids.split(","), function (i, e) {
            $("#ReportingToOther option[value='" + e + "']").prop("selected", true);
        });

        var multipleCancelButtonReportingTo = new Choices('#ReportingToOther', {
            removeItemButton: true,
            maxItemCount: 1000,
            searchResultLimit: 1000,
            renderChoiceLimit: 10,
        });

        //$("#DepartmentID").change(function () {
        //function fnChangeReportingToList(){
        //    var dID = $(this).val();
        //    //if (dID <= 0) {
        //    //reportingToDropdown .innerHTML = originalEmployeeDropdown;
        //    //$("#EmployeeID").load(window.location.href + " #EmployeeID");
        //    //reportingToDropdown .innerHTML = "<select class='"form-select"' items='"ViewBag.EmployeeName"' asp-for='"EmployeeID"' id='"EmployeeID"' name='"EmployeeID"'></select>";
        //    //}
        //    //else {
        //    $.getJSON("/HR/GatePass/EmployeeNameByDepartmentID/", { departmentId: dID },
        //        function (data) {
        //            var newReportingToHTML = "";
        //            for (var i = 0; i < data.length; i++) {
        //                /* IMPORTANT CODE
        //                //var option = document.createElement("option");
        //                //var id = data[i].employeeID;
        //                //option.id = data[i].employeeID;
        //                //option.value = data[i].employeeName;
        //                //employeeDropdown.appendChild(option);
        //                 IMPORTANT CODE */

        //                newReportingToHTML += "<option id='" + data[i].employeeID + "' value='" + data[i].employeeID + "'>" + data[i].employeeName + "</option>";
        //            }
        //                reportingDrp.innerHTML = newReportingToHTML;
        //        });
        //    //}
        //    };
        //});
    });

    function fnAddReportingToArray() {
        var selectedReportingTo = [];
        // Loop through the options and check if they are selected
        for (let i = 0; i < reportingToDropdown.options.length; i++) {
            const option = reportingToDropdown.options[i];
            if (option.selected) {
                selectedReportingTo.push(option.value);
                //selectedItems.push(option.value);
            }
        }
        document.getElementById("ReportingToArray").value = selectedReportingTo.toString();
    };

    function fnChangeReportingToList() {
        var departmentDropdown = document.getElementById("DepartmentID");
        let selectedDept = departmentDropdown.value;
        //var dID = $(this).val();
        //if (dID <= 0) {
        //reportingToDropdown .innerHTML = originalEmployeeDropdown;
        //$("#EmployeeID").load(window.location.href + " #EmployeeID");
        //reportingToDropdown .innerHTML = "<select class='"form-select"' items='"ViewBag.EmployeeName"' asp-for='"EmployeeID"' id='"EmployeeID"' name='"EmployeeID"'></select>";
        //}
        //else {
        $.getJSON("/HR/GatePass/EmployeeNameByDepartmentID/", { departmentId: selectedDept },
            function (data) {
                var newReportingToHTML = "";
                for (var i = 0; i < data.length; i++) {
                    /* IMPORTANT CODE
                    //var option = document.createElement("option");
                    //var id = data[i].employeeID;
                    //option.id = data[i].employeeID;
                    //option.value = data[i].employeeName;
                    //employeeDropdown.appendChild(option);
                     IMPORTANT CODE */

                    newReportingToHTML += "<option id='" + data[i].employeeID + "' value='" + data[i].employeeID + "'>" + data[i].employeeName + "</option>";
                }
                reportingDrp.innerHTML = newReportingToHTML;
            });
        //}
    };

    function fnShowOtherReportings() {
        //document.getElementById('divForOtherReporting').removeAttribute('hidden');
        const divHide = document.getElementById('divForOtherReporting');

        let isHide = divHide.hasAttribute('hidden');
        if (isHide) {
            divHide.removeAttribute('hidden');
        }
        else {
            divHide.setAttribute('hidden', true);
        }
    };
</script>

<!--
    //$('#formEmployee').submit(function fnSubmitEmployeeDetail(event) {
    //    alert("Submiteed");
    //        var ls = laddaStart('btnSave');
    //        debugger;
    //        $.ajax({
    //            type: 'POST',
    //            url: '/Admin/Employee/AddUpdateEmployee/',
    //            dataType: 'json',
    //            beforeSend: function () { },
    //            success: function (data) {
    //                debugger;
    //                console.log(data.status);
    //                if (data.status) {
    //                    //notification
    //                    Lobibox.notify('success', {
    //                        pauseDelayOnHover: true,
    //                        size: 'mini',
    //                        icon: 'bx bx-check-circle',
    //                        continueDelayOnInactiveTab: false,
    //                        position: 'bottom right',
    //                        msg: data.message,
    //                    });
    //                    top.location.href = "/Admin/Employee/Index";
    //                    //window.location("_employeeAddresList");;
    //                }
    //                else {
    //                    Lobibox.notify('error', {
    //                        pauseDelayOnHover: true,
    //                        size: 'mini',
    //                        icon: 'bx bx-check-circle',
    //                        continueDelayOnInactiveTab: false,
    //                        position: 'bottom right',
    //                        msg: 'MessageHelper.Error'
    //                    });
    //                }
    //            },
    //            error: function (error) {
    //                laddaStop(ls);
    //                Lobibox.notify('error', {
    //                    pauseDelayOnHover: true,
    //                    size: 'mini',
    //                    icon: 'bx bx-check-circle',
    //                    continueDelayOnInactiveTab: false,
    //                    position: 'bottom right',
    //                    msg: 'MessageHelper.Error'
    //                });
    //            }
    //        }).always(function () {
    //            hideloader();
    //        });
    //    )};-->
<!--
@*@await Html.PartialAsync("_ValidationScriptsPartial")
    <script type="text/javascript">
    var urlsave = '@Url.Action("AddUpdateEmployee", "Employee")';
    function fnSubmit() {
    if ($("#formEmployee").valid()) {
    var l = laddaStart('btnSave');
    modeldata = $("#formEmployee").serializeArray();
    debugger
    $.ajax({
    type: 'POST',
    url: urlsave,
    data: modeldata,
    dataType: 'json',
    beforeSend: function () { },
    success: function (data) {
    window.location.reload().delay(3000);
    if (data.status) {
    //notification
    $("#canvas_Employee").hide();//('hide');
    Lobibox.notify('success', {
    pauseDelayOnHover: true,
    size: 'mini',
    icon: 'bx bx-check-circle',
    continueDelayOnInactiveTab: false,
    position: 'bottom right',
    msg: data.message
    });
    }
    else {
    Lobibox.notify('error', {
    pauseDelayOnHover: true,
    size: 'mini',
    icon: 'bx bx-check-circle',
    continueDelayOnInactiveTab: false,
    position: 'bottom right',
    msg: data.message
    });
    }
    },
    error: function (error) {
    laddaStop(l);
    Lobibox.notify('error', {
    pauseDelayOnHover: true,
    size: 'mini',
    icon: 'bx bx-check-circle',
    continueDelayOnInactiveTab: false,
    position: 'bottom right',
    msg: "@MessageHelper.Error"
    });
    }
    }).always(function () {
    hideLoader();
    });
    }
    };
    </script>*@
-->

<a class="nav-link dropdown-toggle dropdown-toggle-nocaret position-relative" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <div onclick="fnOpenNotificationDRP()">
        <span class="alert-count" id="alertCount"></span>
        <i class='bx bx-bell'></i>
    </div>
</a>
<div class="dropdown-menu dropdown-menu-end">
    <a>
        <div class="msg-header">
            <p class="msg-header-title">Notifications</p>
            <p type="button" class="msg-header-clear ms-auto" id="viewAllNotification" onclick="fnViewAllNotification()">Marks all as read</p>
        </div>
    </a>
    <div class="header-notifications-list">

        <div id="notificationLists">
            @*<a class="dropdown-item" href="javascript:;">
            <div class="d-flex align-items-center">
            <div class="notify bg-light-danger text-danger">
            <iconify-icon icon="la:calendar-day"></iconify-icon>
            </div>
            <div class="notify bg-light-primary text-primary">
            <i class="bx bx-group"></i>
            </div>
            <div class="flex-grow-1">
            <h6 class="msg-name">
            Meeting Schedule:<span class="msg-time float-end">
            14 Sec
            ago
            </span>
            </h6>
            <p class="msg-info">5 new user registered</p>
            </div>
            </div>
            </a>*@
        </div>

        @* <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-danger text-danger">
        <i class="bx bx-cart-alt"></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        New Orders <span class="msg-time float-end">
        2 min
        ago
        </span>
        </h6>
        <p class="msg-info">You have recived new orders</p>
        </div>
        </div>
        </a>*@
        @*
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-success text-success">
        <i class="bx bx-file"></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        24 PDF File<span class="msg-time float-end">
        19 min
        ago
        </span>
        </h6>
        <p class="msg-info">The pdf files generated</p>
        </div>
        </div>
        </a>

        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-warning text-warning">
        <i class="bx bx-send"></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        Time Response <span class="msg-time float-end">
        28 min
        ago
        </span>
        </h6>
        <p class="msg-info">5.1 min avarage time response</p>
        </div>
        </div>
        </a>
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-info text-info">
        <i class="bx bx-home-circle"></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        New Product Approved <span class="msg-time float-end">2 hrs ago</span>
        </h6>
        <p class="msg-info">Your new product has approved</p>
        </div>
        </div>
        </a>
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-danger text-danger">
        <i class="bx bx-message-detail"></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        New Comments <span class="msg-time float-end">
        4 hrs
        ago
        </span>
        </h6>
        <p class="msg-info">New customer comments recived</p>
        </div>
        </div>
        </a>
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-success text-success">
        <i class='bx bx-check-square'></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        Your item is shipped <span class="msg-time float-end">
        5 hrs
        ago
        </span>
        </h6>
        <p class="msg-info">Successfully shipped your item</p>
        </div>
        </div>
        </a>
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-primary text-primary">
        <i class='bx bx-user-pin'></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        New 24 authors<span class="msg-time float-end">
        1 day
        ago
        </span>
        </h6>
        <p class="msg-info">24 new authors joined last week</p>
        </div>
        </div>
        </a>
        <a class="dropdown-item" href="javascript:;">
        <div class="d-flex align-items-center">
        <div class="notify bg-light-warning text-warning">
        <i class='bx bx-door-open'></i>
        </div>
        <div class="flex-grow-1">
        <h6 class="msg-name">
        Defense Alerts <span class="msg-time float-end">
        2 weeks
        ago
        </span>
        </h6>
        <p class="msg-info">45% less alerts last 4 weeks</p>
        </div>
        </div>
        </a>
        *@
    </div>
    <a href="javascript:;" onclick="fnViewAllNotificationPage()">
        <div class="text-center msg-footer">View All Notifications</div>
    </a>
    @*<a asp-area="" asp-controller="Notification" asp-action="ViewAllNotificationList">
    <div class="text-center msg-footer">View All Notifications</div>
    </a>*@
</div>

<script type="text/javascript">
    var urlGetNotification = '@Url.Action("GetNotificationCount", "Notification")';
    $(function () {
        // Call the updateNotificationCount function every 3 seconds
        setInterval(function () {
            //alert('GetNotificationCount ajax invoked "urlGetNotification" - ' + urlGetNotification);
            // code to be executed
            $.ajax({
                url: urlGetNotification,
                type: 'GET',
                dataType: 'json',
                success: function (data, textStatus, jqXHR) {
                    //console.log('Data--'+data)
                    //alert('data--' + data);
                    let count = data.count.length;
                    //debugger;
                    //var count = data.count;
                    if (count > 0) {
                        $('#alertCount').text(count);
                    }
                    else {
                        $('#alertCount').text('');
                        $('#alertCount').removeClass('alert-count');
                        //class="alert-count"
                    }
                    // Get the element with the class you want to disable
                    var element = document.getElementById('alert-count');

                    // Disable the class by adding a disabled class
                    element.classList.add('disabled');

                    //// Create an Audio object with the path to your sound file
                    //var notificationSound = new Audio('C:/Users/Lenovo/Documents/GitHub/aksharm2l/ERP/wwwroot/audio/notification/Simple-notification.mp3');

                    //// Call the play() method when you want to play the sound
                    //notificationSound.play();

                    //notificationSound.addEventListener('error', function () {
                    //    alert('Notification sound not paly');
                    //    // Code to be executed if there is an error playing the sound
                    //});
                }
            });
        }, 20000);
    });

    var urlViewAllNotification = '@Url.Action("ViewAllNotification","Notification")';
    function fnViewAllNotification() {

        var l = laddaStart('viewAllNotification');
        console.log('l-- ' + l);
        modeldata = $("#viewAllNotification").serialize();
        //alert("urlViewAllNotification---" + urlViewAllNotification);
        $.ajax({
            url: urlViewAllNotification,
            type: 'POST',
            dataType: 'json',
            data: modeldata,
            beforeSend: function () { },
            success: function (data) {
                if (data.status) {
                    //alert('Viewed All Notification');
                    //notification
                    //$("#canvas_masterentity2").hide();//('hide');
                    //Lobibox.notify('success', {
                    //    pauseDelayOnHover: true,
                    //    size: 'mini',
                    //    icon: 'bx bx-check-circle',
                    //    continueDelayOnInactiveTab: false,
                    //    position: 'bottom right',
                    //    msg: data.message
                    //});
                }
                else {
                    //alert('error - 1');
                    Lobibox.notify('error', {
                        pauseDelayOnHover: true,
                        size: 'mini',
                        icon: 'bx bx-check-circle',
                        continueDelayOnInactiveTab: false,
                        position: 'bottom right',
                        msg: data.message
                    });
                }
            },
            error: function (error) {
                //alert('error - 2');
                laddaStop(l);
                Lobibox.notify('error', {
                    pauseDelayOnHover: true,
                    size: 'mini',
                    icon: 'bx bx-check-circle',
                    continueDelayOnInactiveTab: false,
                    position: 'bottom right',
                    msg: "@MessageHelper.Error"
                });
            }
        }).always(function () {
            hideLoader();
        });

    };

    var urlViewOneNotificationOnly = '@Url.Action("ViewOneNotificationOnly","Notification")';
    function fnViewOneNotificationOnly(NotificationID) {
        var _id = NotificationID;
        var _parameters = { notificationID: _id };
        $.ajax({
            url: urlViewOneNotificationOnly,
            type: 'POST',
            dataType: 'json',
            data: _parameters,
            beforeSend: function () { },
            success: function (data) {
                if (data.status) {
                    //alert('Viewed One Notification Only');
                    //notification
                    //$("#canvas_masterentity2").hide();//('hide');
                    //Lobibox.notify('success', {
                    //    pauseDelayOnHover: true,
                    //    size: 'mini',
                    //    icon: 'bx bx-check-circle',
                    //    continueDelayOnInactiveTab: false,
                    //    position: 'bottom right',
                    //    msg: data.message
                    //});
                }
                else {
                    //alert('error - 1');
                    Lobibox.notify('error', {
                        pauseDelayOnHover: true,
                        size: 'mini',
                        icon: 'bx bx-check-circle',
                        continueDelayOnInactiveTab: false,
                        position: 'bottom right',
                        msg: data.message
                    });
                }
            },
            error: function (error) {
                //alert('error - 2');
                laddaStop(l);
                Lobibox.notify('error', {
                    pauseDelayOnHover: true,
                    size: 'mini',
                    icon: 'bx bx-check-circle',
                    continueDelayOnInactiveTab: false,
                    position: 'bottom right',
                    msg: "@MessageHelper.Error"
                });
            }
        }).always(function () {
            hideLoader();
        });

    };

    //var urlViewAllNotificationPage = 'Url.Action("ViewAllNotificationList","Notification")';
    function fnViewAllNotificationPage() {
        //modeldata = $("#viewAllNotification").serialize();
        //alert('fnViewAllNotificationPage Hit - ');
        window.location.href = "/Notification/ViewAllNotificationList";

        //$.ajax({
        //    url: urlViewAllNotificationPage,
        //    type: 'POST',
        //    dataType: 'json',
        //    data: modeldata,
        //    beforeSend: function () { },
        //    success: function (data) {
        //        if (data.status) {
        //            //alert('Viewed One Notification Only');
        //            //notification
        //            //$("#canvas_masterentity2").hide();//('hide');
        //            //Lobibox.notify('success', {
        //            //    pauseDelayOnHover: true,
        //            //    size: 'mini',
        //            //    icon: 'bx bx-check-circle',
        //            //    continueDelayOnInactiveTab: false,
        //            //    position: 'bottom right',
        //            //    msg: data.message
        //            //});
        //        }
        //        else {
        //            //alert('error - 1');
        //            Lobibox.notify('error', {
        //                pauseDelayOnHover: true,
        //                size: 'mini',
        //                icon: 'bx bx-check-circle',
        //                continueDelayOnInactiveTab: false,
        //                position: 'bottom right',
        //                msg: data.message
        //            });
        //        }
        //    },
        //    error: function (error) {
        //        //alert('error - 2');
        //        laddaStop(l);
        //        Lobibox.notify('error', {
        //            pauseDelayOnHover: true,
        //            size: 'mini',
        //            icon: 'bx bx-check-circle',
        //            continueDelayOnInactiveTab: false,
        //            position: 'bottom right',
        //            msg: "@MessageHelper.Error"
        //        });
        //    }
        //}).always(function () {
        //    hideLoader();
        //});
    };

</script>